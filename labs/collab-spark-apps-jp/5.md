# ステップ 5：アプリ用にアイデンティティを選択する


ステップ 3 で体験したように、パーソナル アクセス トークンが Cisco Spark に送信されると、コードが自身に属するものとして機能します。

**ただ、アプリケーションを他の Cisco Spark ユーザの下で実行したい状況もあるでしょう。
では、そうした状況について見てみます。**

たとえば、事前登録されたユーザに代わって、留守中に自動的にメッセージを返してくれるアシスタント機能を作成していると想定します。
この Spark アプリには、事前登録されたユーザのメッセージすべてにアクセスする必要があります。
そうすることで、自分宛の情報を確認し、あった場合には該当するアイデンティティで返答できるようになります。
この Spark アプリのユーザは、Cisco Spark アプリの認証を取得して、メッセージにアクセスします。

_このようなアプリケーションは、Cisco Spark インテグレーションと呼ばれます。
Spark インテグレーションでは、OAuth の認可フロー プロトコルが活用され、Cisco Spark ユーザのアイデンティティで機能するアクセス トークンが発行されます。
これらのトークンには範囲が定められており、Cisco Spark ユーザ自身に許可されている認証の枠内に限定されます。_

<div align="center">![Cisco Spark アプリ](/posts/files/collab-spark-apps-jp/assets/images/step5-access-tokens.png)</div><br/><br/>


ここでは、少し異なる方法で動作する「Out Of Office アシスタント」を考えてみましょう。

たとえば、すべてのユーザがアシスタントを Cisco Spark ルームに招待することができ、そのアシスタントと次のようなやり取りを行うと想定します。
「@OutOfOffice は、月曜日は休暇ですか」、「@OutOfOffice は、2 週間不在にしています」。  
つまり、それぞれの「Out Of Office」アプリケーションに質問を受け付けさせ、他の人のアイデンティティを使って応答するのではなく、それぞれのアイデンティティの下で回答させるのです。

**これは、ボット アカウントを利用した方法になります。**

_ボットは、自身のアカウントの下で動作する専用の Cisco Spark アカウントです。
ボットは、他の Cisco Spark ユーザと同様にルームに追加することができます。
ただ、相違点や制限もあります。たとえば、グループ ルームでメッセージを受け取るには、自分宛の情報として示してもらう必要があります。_

次のラボでは、自身の Cisco Spark ボットを実行、拡張、作成し、インテグレーションを実施します。


## キーポイント

Cisco Spark では、さまざまなタイプのアプリケーションを作成できる REST API を公開しています。
通知者、ウォッチャ、コントローラ、インタラクティブ アシスタントなどです。

Cisco Spark アプリは単なるコードに留まるものではなく、API アクセス トークンを通じて、Cisco Spark とやり取りができるものです。
アプリケーションは、API アクセス トークンからアイデンティティを引き継ぎ、「もうひとりの自分」として機能することができます（開発者アクセス トークン）。また、他のユーザに属するものとしての動作（Cisco Spark インテグレーション）、マシンとしての動作（Cisco Spark ボット アカウント）をさせることもできます。

Cisco Spark アプリは、コードを記述して作成することも、サード パーティ サービスと統合させて利用することもできます。
